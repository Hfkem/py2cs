## ccc: 沒有用強化學習之前，機器控制（自走車，倒單擺，機器人）等控制是怎麼做的

在強化學習之前，機器控制（如自走車、倒單擺、機器人）主要是基於**傳統控制理論**和**經驗設計**的方法。以下是常見的控制技術與方法：

---

### 1. **基於模型的控制**
#### (1) **PID控制器**
- **原理**：PID（比例-積分-微分）控制器是最基本的控制方法之一。
  - **比例 (P)**：控制輸出與誤差成正比，用來減少誤差。
  - **積分 (I)**：累積誤差，用來消除穩態誤差。
  - **微分 (D)**：根據誤差變化率調整控制輸出，用來減少震盪。
- **應用**：適用於簡單系統（如溫度控制、自走車的速度控制等）。
- **缺點**：對於非線性或複雜系統，性能有限。

#### (2) **狀態空間控制**
- **描述**：將系統表示為狀態變量的一階微分方程組（即狀態空間模型）。
  - 方程形式：  
    \[
    \dot{x} = Ax + Bu  
    y = Cx + Du
    \]
    其中，\( x \) 是狀態變量，\( u \) 是輸入，\( y \) 是輸出。
- **方法**：
  - **極點配置法**：設計反饋增益，使系統極點位於期望位置。
  - **LQR (線性二次調節器)**：通過優化二次性能指標，設計最佳控制律。
- **應用**：適用於較複雜的線性系統，例如倒單擺控制。

#### (3) **非線性控制**
- **描述**：針對系統中的非線性現象進行建模與設計控制器。
  - **常見技術**：
    - **增益調度**：隨著系統狀態變化調整控制參數。
    - **滑模控制**：對抗非線性和不確定性。
    - **李雅普諾夫方法**：保證系統穩定性。
- **應用**：多關節機器人、非線性擺系統。

---

### 2. **基於優化與預測的控制**
#### (1) **模型預測控制 (MPC)**
- **原理**：根據系統模型，通過解決優化問題來計算控制輸出。
  - 預測系統在未來的一段時間內的行為。
  - 在每次控制迭代中解決一個優化問題。
- **特點**：
  - 可以處理約束條件（如輸入飽和）。
  - 適合多變量系統。
- **應用**：自動駕駛、工業過程控制。

---

### 3. **基於學習的控制**
#### (1) **經驗式控制**
- **描述**：根據工程經驗和實驗調整控制器參數。
- **應用**：早期的機器人控制，依賴手工調整。

#### (2) **查表法 (Lookup Table)**
- **描述**：為不同的輸入狀態預先計算並存儲控制輸出。
- **應用**：簡單的機器控制系統，例如基於傳感器的固定反應。

---

### 4. **混合方法**
- 結合基於模型與經驗的方法。例如：
  - **模糊控制**：使用模糊邏輯處理不確定性和非線性。
  - **自適應控制**：根據環境變化動態調整控制策略。

---

### 實際應用案例
#### **(1) 倒單擺**
- 使用 PID 控制器或 LQR 控制來穩定倒單擺。
- 在更複雜的情況下，使用模型預測控制 (MPC)。

#### **(2) 自走車**
- **路徑跟隨控制**：基於 PID 或 Pure Pursuit 演算法。
- **避障控制**：使用 A* 或 Dijkstra 規劃，結合基於模型的實時調節。

#### **(3) 多關節機器人**
- **軌跡跟蹤**：基於逆動力學的控制（例如逆運動學計算+PD 控制）。
- **姿態穩定**：使用李雅普諾夫穩定性分析設計反饋控制。

---

這些方法在現實中已經成功應用於各種工程系統中，但它們通常需要高質量的數學模型，對於動態複雜、建模困難的系統，可能表現受限。這種背景下，強化學習（特別是深度強化學習）提供了一種不依賴精確建模的新方法。

## ccc: 控制理論是什麼？


**控制理論**是研究動態系統的行為及其控制方法的一門學科，目的是設計和實現控制系統，使動態系統能夠按預期的方式運行。這一理論廣泛應用於工業、工程、機械、電子、航空航天、自動化等領域。

---

### **控制理論的核心目標**
1. **穩定性 (Stability)**  
   - 確保系統在受擾動後能回到平衡狀態或穩定運行。
   - 舉例：保持倒單擺直立，或者讓飛機在受到氣流擾動後穩定飛行。

2. **跟蹤 (Tracking)**  
   - 使系統輸出能準確跟隨期望輸入或目標。
   - 舉例：讓自走車按照設定路徑行駛。

3. **調節 (Regulation)**  
   - 維持系統在特定的參數值附近運行。
   - 舉例：恆溫器維持房間溫度在設置值附近。

4. **干擾抑制 (Disturbance Rejection)**  
   - 減少外部干擾對系統的影響。
   - 舉例：消除噪音對麥克風系統的影響。

---

### **控制理論的基本組成**
控制理論涉及系統建模、分析和設計，主要包括以下部分：

#### 1. **系統建模 (System Modeling)**  
   - **描述**：將實際物理系統用數學模型（微分方程、傳遞函數、狀態空間模型等）來描述。
   - **類型**：
     - **線性系統**：系統輸出與輸入之間關係是線性的。
     - **非線性系統**：系統行為具有非線性特性。

#### 2. **控制器設計 (Controller Design)**  
   - 根據模型設計合適的控制器來達到系統目標。
   - **常見控制器**：
     - PID 控制器。
     - 狀態反饋控制。
     - 最優控制（如 LQR）。
     - 模型預測控制 (MPC)。

#### 3. **系統分析 (System Analysis)**  
   - 分析系統的穩定性、可控性和可觀性。
   - **核心指標**：
     - **穩定性**：例如李雅普諾夫穩定性。
     - **瞬態響應**：如上升時間、過沖。
     - **頻域響應**：如增益與相位裕度。

#### 4. **反饋機制 (Feedback Mechanism)**  
   - **反饋控制**：利用系統輸出的信息來調整輸入。
     - 優點：可以應對模型不確定性和外部干擾。
   - **開環控制**：無需利用系統輸出，但對模型依賴強。

---

### **控制理論的兩大分支**

#### 1. **經典控制理論 (Classical Control Theory)**
   - **特點**：
     - 主要針對單輸入單輸出 (SISO) 系統。
     - 通過頻域方法（如波德圖、奈奎斯特圖）進行分析與設計。
   - **核心工具**：
     - 傳遞函數。
     - 積分器、微分器、濾波器。
   - **應用**：PID 控制器的設計、簡單工業系統。

#### 2. **現代控制理論 (Modern Control Theory)**
   - **特點**：
     - 基於狀態空間表示法，處理多輸入多輸出 (MIMO) 系統。
     - 適用於更複雜、非線性的系統。
   - **核心方法**：
     - 狀態反饋控制。
     - 最優控制（如 LQR）。
     - 非線性控制與自適應控制。
   - **應用**：航天器姿態控制、機器人控制。

---

### **控制理論的應用範疇**
1. **機械工程**：如機器人的運動控制、自動化生產線。
2. **電子工程**：如電動機控制、電源管理。
3. **航空航天**：如飛機自動駕駛、火箭姿態控制。
4. **自動駕駛**：如車輛穩定控制系統 (ESP)。
5. **工業自動化**：如化工過程控制、溫控系統。

---

### **控制理論的現代發展**
1. **結合學習方法**：
   - 將機器學習、強化學習融入控制系統設計。
2. **複雜系統控制**：
   - 控制大規模分散系統（如智能電網）。
3. **智能控制**：
   - 模糊控制、神經網路控制。

---

總結來說，控制理論是支撐現代自動化和工程技術的基礎科學，無論是早期的手工設計還是現代智能控制，都依賴於對系統行為的精確建模與控制策略的設計。