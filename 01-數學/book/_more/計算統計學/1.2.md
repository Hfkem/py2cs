## 1.2 條件概率與獨立性

在統計學中，條件概率是指事件 A 在事件 B 發生的條件下的概率，通常表示為 P(A|B)，讀作 A 在 B 條件下的概率。這裡要先強調「條件」這個詞的意思，即講的是假設事件 B 發生，計算 A 發生的概率。換句話說，條件概率實際上是一種修正了機率的概念。

獨立性則是通過比較同時發生 A 和 B 的機率和分別發生 A 和 B 的機率之積，來判斷 A 和 B 是否獨立，如果兩種情況的機率之積相等，那麼 A 和 B 就是獨立的，記作：

P(A,B) = P(A) x P(B)

那麼當 A 和 B 相互依賴、影響時，它們就是非獨立的。

接下來，我們會使用 Python 來演示條件概率和獨立性的應用。

首先，讓我們來寫一個簡單的函數，計算條件概率：

```python
def conditional_prob(p_a, p_b_given_a):
    """
    計算條件概率 P(B | A)

    Args:
        p_a (float): 事件 A 發生的概率
        p_b_given_a (float): 在事件 A 發生的情況下事件 B 發生的概率

    Returns:
        float: 事件 B 在事件 A 條件下發生的概率
    """
    return p_b_given_a / p_a
```

上面的函數接受兩個參數：事件 A 發生的概率 p_a 和在事件 A 發生的情況下事件 B 發生的概率 p_b_given_a。函數返回的結果是在事件 A 條件下事件 B 發生的概率。

現在，假設有一個盒子，其中有 5 個紅球和 3 個藍球，我們從中隨機抽一個球，求抽到的是紅球，給定抽到的球是藍球的條件概率。

```python
# 紅球數量
n_red = 5

# 藍球數量
n_blue = 3

# 總共球數
n_total = n_red + n_blue

# 抽到紅球的概率
p_red = n_red / n_total

# 抽到藍球的概率
p_blue = n_blue / n_total

# 可以理解為「抽到藍球」這個事件在「抽到紅球」這個事件條件下的概率
# 換句話說，已知抽到的球是藍球，求抽到的是紅球的條件概率
p_red_given_blue = conditional_prob(p_blue, p_red)

print("P(紅球 | 藍球) = " + str(p_red_given_blue))
```

要計算條件概率，我們先要知道可能發生的基本事件的機率。因為盒子中有 5 個紅球和 3 個藍球，所以抽到紅球的機率是 5/8，抽到藍球的機率是 3/8；如果已知抽到的是藍球，那麼抽到紅球的條件概率可以用上面定義的 conditional_prob 函數計算出來，結果為 5/3，即在抽到藍球的情況下，抽到紅球的條件概率是 5/3 或 1.6667。

現在看看另一個例子，假設班上有 60 個學生，其中男學生有 32 個，女學生有 28 個，男學生和通過數學測試的學生都有 20 個，問通過數學測試的學生是男生的條件概率。

```python
# 男學生數量
n_male = 32

# 女學生數量
n_female = 28

# 通過數學測試且是男學生
n_math_pass_male = 20

# 通過數學測試的概率
p_math_pass = (n_math_pass_male) / n_total

# 男學生概率
p_male = n_male / n_total

# 通過數學測試且是男學生的條件概率
p_math_pass_given_male = conditional_prob(p_male, n_math_pass_male / n_male)

print("P(通過數學測試 | 男學生) = " + str(p_math_pass_given_male))
```

在這個例子中，我們首先計算了通過數學測試的概率，即 20/60，然後計算 男學生的機率，即 32/60，最後，使用 conditional_prob 函數計算了通過數學測試且是男學生的條件概率，得到的結果是 20/32，即在已知是男學生的情況下，通過數學測試的條件概率是 20/32 或 0.625。

現在讓我們來看一下獨立性的應用。假設有一個袋子，裡面有 3 顆白球和 2 顆黑球，在不放回的情況下，從袋子裡抽出兩顆球，求第一顆抽出的是白球，和第二顆抽出的是黑球的概率。

```python
# 白球數量
n_white = 3

# 黑球數量
n_black = 2

# 抽第一顆白球的概率
p_first_white = n_white / n_total

# 抽第二顆黑球的概率
p_second_black = n_black / (n_total - 1)

# 抽第一顆白球且抽第二顆黑球的概率
p_first_white_and_second_black = p_first_white * p_second_black

print("P(第一顆白球且第二顆黑球) = " + str(p_first_white_and_second_black))
```

這個例子中，我們首先計算了抽第一顆白球的概率，即 3/5，然後計算了抽第二顆黑球的概率，即 2/4（注意第一顆白球已經被抽出來了，所以剩下的球數只有 4），最後，因為這兩個事件是相互獨立的，我們可以通過抽第一顆白球的機率和抽第二顆黑球的機率之積，來計算第一顆抽出的是白球，第二顆抽出的是黑球的概率，得到的結果是 3/20，即第一顆抽出的是白球，第二顆抽出的是黑球的概率是 3/20 或 0.15。

總之，條件概率和獨立性是計算統計學中基本的概念，它們可以幫助我們理解和解決各種現實世界中的問題，在 Python 中，可以通過一些函數和運算符來計算它們。