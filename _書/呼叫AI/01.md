# 呼叫 OpenAI 的 API

## ccc: 如何呼叫 openai 的 api?

ChatGPT:

要使用 OpenAI API，您需要：

1. 建立一個 OpenAI 帳戶。
2. 設定帳戶，以便您可以啟用 API 密鑰。
3. 訪問 OpenAI API 文檔以了解如何使用 API。

一旦您完成了這些步驟，您就可以使用以下命令之一來調用 OpenAI API：

1. 使用 curl 命令。
2. 使用語言特定的客戶端庫，例如 Python 或 JavaScript庫。

## ccc: 請給一個 python 的呼叫範例

ChatGPT:

下面是一個使用 Python 呼叫 API 的簡單範例：

```python
import requests

response = requests.get('https://api.example.com/data')

if response.status_code == 200:
    # 如果請求成功，則處理 API 回應
    data = response.json()
    print(data)
else:
    # 請求失敗，處理錯誤
    print('Error:', response.status_code)
```

在這個範例中，我們使用 requests 套件執行 HTTP GET 請求，並將回應儲存在 `response` 變數中。接著，檢查回應的狀態碼，如果是 200 OK，我們解析回應並列印出來。如果請求失敗，我們列印出錯誤訊息。

## ccc: 請給一個用 curl 呼叫 openai api 的範例

ChatGPT:

以下是用 curl 呼叫 OpenAI GPT-3 官方 API 的範例：

```
curl https://api.openai.com/v1/engines/davinci-codex/completions \
-X POST \
-H "Content-Type: application/json" \
-H "Authorization: Bearer <YOUR_API_KEY>" \
-d '{
  "prompt": "Hello, ",
  "max_tokens": 5
}'
```

請將 `<YOUR_API_KEY>` 替換為您從 OpenAI 獲取的 API 金鑰。此命令將會在命令列介面中顯示 OpenAI GPT-3 模型生成的前五個 tokens。

## ccc: 如何用 node.js 呼叫 openai 的 api?

ChatGPT:

您可以使用以下步驟使用 Node.js 呼叫 OpenAI API：

1. 安裝 'openai' 套件以便在 Node.js 中使用：

```
npm install openai
```

2. 引入套件並宣告您的 OpenAI API 金鑰：

```js
const openai = require('openai');
const apiKey = 'YOUR_API_KEY';
```

3. 透過 'setApiKey' 方法將金鑰傳遞給套件：

```js
openai.apiKey = apiKey;
```

4. 使用 API 方法進行呼叫：

```js
openai.completions.create({
  engine: 'davinci',
  prompt: 'Hello, my name is',
  maxTokens: 5,
}).then(response => {
  console.log(response.data.choices[0].text);
}).catch(error => {
  console.log(error);
});
```

在此範例中，我們使用 'davinci' 引擎進行文本自動完成，並設置了 'maxTokens' 為 5，因此 API 會生成五個詞彙，最後我們將 API 回傳的內容記錄在日誌檔案中做為測試。

## ccc: 如何用 deno 呼叫 openai 的 api ?

ChatGPT:

我們可以使用`axios`這個 JavaScript library 進行 API 呼叫，以下是一個簡單的 deno 程序使用 openai API (自然語言處理系統 GPT-3) 的範例：

```typescript
import axios from 'https://deno.land/x/axios/mod.ts';

const OPENAI_API_KEY = 'YOUR_API_KEY';

const prompt = `書寫一篇介紹 openai 的文章`;

const headers = {
  'Content-Type': 'application/json',
  Authorization: `Bearer ${OPENAI_API_KEY}`,
};

const generateText = async () => {
  const url = 'https://api.openai.com/v1/engines/davinci-codex/completions';
  const data = {
    prompt,
    max_tokens: 2048,
    temperature: 0.5,
    top_p: 1,
    n: 1,
    stop: '\n',
  };
  const response = await axios.post(url, data, { headers });
  const { choices } = response.data.choices[0];
  return choices.map((choice) => choice.text).join('');
};

console.log(await generateText());
```

需要注意的是，在執行程式之前，使用者需要到 https://beta.openai.com/login/?returnTo=/docs/api-access/overview 獲取自己的 API key。
