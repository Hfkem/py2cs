## 第二章：隨機變量與樣本統計

## 引言

在統計學中，我們通常將同類型的數據看作一個整體，例如：全班學生的成績、某種製程的產品質量、某個城市的氣溫等等，將這樣的數據整體稱為**母體**。在實際應用中，我們通常無法觀察到全部的母體數據，而是只能抓取其中一部分，通常抓取的這一部分被稱為**樣本**。由此，我們需要將樣本用於對母體進行估計。本章主要介紹關於隨機變量、樣本統計的一些基本知識。

## 隨機變量

在統計學中，主要研究的是隨機現象的統計規律，而隨機變量是描述隨機現象的一個最基本、最基礎的數學概念。

### 隨機變量的定義

隨機變量是指隨機試驗結果的數值表示，它可以取多個值中的某一個，而且在統計學中通常用大寫字母表示，例如：$X$、$Y$、$Z$ 等。如果隨機變量 $X$ 可以取到的值只有有限個或者可數個，則稱 $X$ 為**離散型隨機變量**；如果 $X$ 的取值是一個區間，則稱 $X$ 為**連續型隨機變量**。

### 離散型隨機變量的概率分布

假設隨機變量 $X$ 的可能取值為 $x_1, x_2, \cdots, x_n$，則隨機變量 $X$ 的概率分布可以用一個函數 $P(X=x_i)$ 表示，其中 $P(X=x_i)$ 表示 $X$ 等於 $x_i$ 的概率，滿足以下條件：

- $\sum\limits_{i=1}^{n} P(X=x_i)=1$
- $P(X=x_i) \geq 0$

在 Python 中，`scipy` 库的 `stats` 子模块提供了許多常見隨機變量的概率分布函數，如下所示：

- 伯努利分布（Bernoulli Distribution）：表示伯努利試驗中成功或失敗的隨機變量，其中成功的概率為 $p$。 `stats.bernoulli(p)`
- 二項分布（Binomial Distribution）：表示 $n$ 次獨立的伯努利試驗中成功的次數的隨機變量，其中每次成功的概率為 $p$。 `stats.binom(n, p)`
- 泊松分布（Poisson Distribution）：表示在單位時間或空間内事件發生的次數的隨機變量。 `stats.poisson(mu)`

### 連續型隨機變量的概率密度函數

連續型隨機變量的概率分布不能用像離散型隨機變量那樣精確地表示，因為在連續模型中， $X$ 取任何一個具體的值的概率均為 0。因此，我們引入了**概率密度函數**（Probability Density Function, PDF）來描述某個範圍内的概率密度值，其表示為 $f(x)$，滿足以下條件：

- $f(x) \geq 0$
- $\int_{-\infty}^{+\infty} f(x)dx=1$

在 Python 中，`scipy` 库的 `stats` 子模块也提供了許多常見連續型隨機變量的概率密度函數，如下所示：

- 常態分布（Normal Distribution）：表示自然界中各種隨機因素的綜合表現，其概率密度函數為 $f(x)=\frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2}}$。 `stats.norm(loc=mu, scale=sigma)`
- 指數分布（Exponential Distribution）：用於描述隨機事件發生的時間間隔，其概率密度函數為 $f(x)=\frac{1}{\theta}e^{-\frac{x}{\theta}}$。`stats.expon(scale=theta)`

## 樣本統計

為了推廣母體的統計特徵，需要從母體中隨機抽樣，構成樣本。為了進一步瞭解母體，需要對樣本中的數據進行總結和分析，這時就需要用到樣本統計。

### 樣本均值和標準差

對於一個樣本而言，常見的統計數量有樣本均值和樣本標準差。

樣本均值 $\bar{x}$ 表示樣本中所有觀察值的平均值，可用以下公式計算：

$\bar{x}=\frac{\sum_{i=1}^{n} x_i}{n}$

樣本標準差 $s$ 表示樣本偏離樣本均值的程度，可用以下公式計算：

$s=\sqrt{\frac{\sum_{i=1}^{n}(x_i-\bar{x})^2}{n-1}}$

在 Python 中，可以使用 `numpy` 库中的 `mean()` 和 `std()` 函数來計算樣本均值和樣本標準差。

### 樣本分位數

除了均值和標準差之外，樣本中的分位數信息也是很重要的。樣本 $X_1,X_2,\cdots,X_n$ 的第 $p$ 個分位數是一個數字 $q_p$，滿足：

- 至少有 $p$ 個觀察值小於或等於 $q_p$
- 至少有 $1-p$ 個觀察值大於或等於 $q_p$

常見的是四分位數（Quartile），分為上四分位數（Upper Quartile，UQ）、中位數（Median）、下四分位數（Lower Quartile，LQ）。其中 $\text{IQR}=UQ-LQ$ 稱為四分位差（Interquartile Range，IQR）。

在 Python 中，可以使用 `numpy` 库中的 `percentile()` 函數計算樣本分位數和四分位差。